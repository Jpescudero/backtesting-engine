RAÍZ DEL PROYECTO
-----------------
C:\Users\JorgeP\OneDrive\Bolsa\Scripts\10. Backtesting\

EJECUTABLE PRINCIPAL
--------------------
main.py

CÓDIGO FUENTE
-------------
src\
  __init__.py

  config\
    __init__.py
    paths.py                  # GPS de rutas (PROJECT_ROOT, DATA_DIR, etc.)

  data\
    __init__.py
    data_utils.py             # helpers: iter_ticks_by_year, make_ohlcv, list_tick_files...
    data_to_parquet.py        # Darwinex BID/ASK -> ticks en parquet (por símbolo/año/hora)
    bars1m_to_excel.py        # ticks parquet -> barras 1m CSV (todos los años)
    csv_1m_to_npz.py          # CSV barras 1m -> NPZ (ts, o, h, l, c, v)
    parquet_to_npz.py         # barras parquet -> NPZ (función genérica bars_df_to_npz_arrays)
    feeds.py                  # NPZOHLCVFeed (carga NPZ -> OHLCVArrays para Numba)
    organize_darwinex_files.py# organiza logs Darwinex mezclados en subcarpetas BID/ASK

  engine\
    __init__.py
    core.py                   # motor de backtest con Numba:
                              #   - estrategia ejemplo (momentum corto)
                              #   - SL/TP en %
                              #   - max_bars_in_trade (duración máxima)
                              #   - defensas contra NaNs
                              #   - log de trades completo
                              #   - BacktestConfig / BacktestResult
                              #   - run_backtest_basic(...)

  strategies\
    __init__.py
    # aquí irán las estrategias específicas (p.ej. barrida_apertura.py)

  visualization\
    __init__.py
    visualizacion.py          # scripts de gráficos / exploraciones anteriores

  analytics\
    __init__.py
    reporting.py              # equity_to_series(result, data)
                              # trades_to_dataframe(result, data)
    plots.py                  # plot_equity_curve(...)
                              # plot_price_with_trades(...)
    metrics.py                # equity_curve_metrics(equity_series)
                              # trades_metrics(trades_df)


CARPETAS DE DATOS
-----------------
data\
  raw\
    darwinex\
      NDXm\
        # Inicialmente: todos los .log.gz mezclados
        # NDXm_BID_2021-04-09_14.log.gz
        # NDXm_ASK_2021-04-09_14.log.gz
        #
        # Tras ejecutar organize_darwinex_files:
        BID\
          NDXm_BID_2021-04-09_14.log.gz
          ...
        ASK\
          NDXm_ASK_2021-04-09_14.log.gz
          ...

  parquet\
    ticks\
      NDXm\
        2021\
          NDXm_2021-04-09_14.parquet
          NDXm_2021-04-09_15.parquet
          ...
        2022\
          ...
        # etc. por años
    bars_1m\
      NDXm\
        # (opcional, si decides guardar barras 1m también en parquet)
        # NDXm_2021_1m.parquet
        # NDXm_2022_1m.parquet
        # ...

  npz\
    NDXm\
      NDXm_all_1m.npz          # barras 1m de todos los años en arrays NumPy (ts,o,h,l,c,v)
      # en el futuro: NDXm_2021_1m.npz, etc., si generas por año/timeframe

  other\
    barras_1min_NDXm_todos_anios.csv   # CSV con todas las barras de 1m (input para csv_1m_to_npz)
    # otros ficheros auxiliares


CARPETAS PARA ANÁLISIS Y RESULTADOS
-----------------------------------
notebooks\
  # notebooks de exploración / pruebas

reports\
  # gráficos, estadísticas, informes de backtests, etc.


RUTAS LÓGICAS (VÍA paths.py)
----------------------------
PROJECT_ROOT         = C:\Users\JorgeP\OneDrive\Bolsa\Scripts\10. Backtesting\
SRC_DIR              = PROJECT_ROOT\src\
DATA_DIR             = PROJECT_ROOT\data\
NOTEBOOKS_DIR        = PROJECT_ROOT\notebooks\
REPORTS_DIR          = PROJECT_ROOT\reports\

RAW_DATA_DIR         = DATA_DIR\raw\
DARWINEX_RAW_DIR     = RAW_DATA_DIR\darwinex\

PARQUET_DIR          = DATA_DIR\parquet\
PARQUET_TICKS_DIR    = PARQUET_DIR\ticks\
PARQUET_BARS_1M_DIR  = PARQUET_DIR\bars_1m\

NPZ_DIR              = DATA_DIR\npz\
NPZ_NDXM_DIR         = NPZ_DIR\NDXm\

OTHER_DATA_DIR       = DATA_DIR\other\
